<h1><%= t(".title") %></h1>

<div class="mb-3">
  <%= link_to "ðŸ“‹ #{t(".view_requests")}", borrow_list_index_path, class: "btn btn-outline-primary" %>
</div>

<% if @cart_items.any? %>
  <%= form_with url: checkout_borrow_request_index_path,
                method: :post,
                local: true,
                id: "borrow-cart-form",
                data: { update_url: update_borrow_cart_borrow_request_index_path } do %>

    <table class="table align-middle">
      <thead>
        <tr>
          <th><%= t(".image") %></th>
          <th><%= t(".book") %></th>
          <th><%= t(".available_quantity") %></th>
          <th><%= t(".author") %></th>
          <th><%= t(".quantity") %></th>
          <th class="text-center"><%= t(".select") %></th>
          <th></th>
        </tr>
      </thead>
      <tbody>
        <%= render partial: "cart_item", collection: @cart_items, as: :item %>
      </tbody>
    </table>

    <%== pagy_bootstrap_nav(@pagy) if @pagy.pages > Settings.digits.digit_1 %>

    <div class="mb-3">
      <%= label_tag :start_date, t(".start_date") %>
      <%= date_field_tag :start_date,
                         session[:start_date] || Date.today,
                         class: "form-control auto-save",
                         required: true,
                         min: Date.today %>
    </div>

    <div class="mb-3">
      <%= label_tag :end_date, t(".end_date") %>
      <%= date_field_tag :end_date,
                         session[:end_date] || Date.today + Settings.digits.digit_7,
                         class: "form-control auto-save",
                         required: true,
                         min: (session[:start_date] || Date.today + Settings.digits.digit_1) %>
    </div>

    <%= submit_tag t(".submit"), class: "btn btn-primary mt-2 mb-5" %>
  <% end %>
<% else %>
  <p><%= t(".empty") %></p>
<% end %>
