<% content_for :title, t("admin.books.title") %>

<h3 class="mb-3 fw-bold"><%= t("admin.books.heading") %></h3>

<div class="d-flex justify-content-between align-items-center mb-3 flex-wrap gap-2">
  <%= link_to t("admin.books.actions.add"), new_admin_book_path, class: "btn btn-warning fw-bold" %>

  <div class="d-flex">
    <%= search_form_for @q, url: admin_books_path, method: :get, class: "d-flex" do |f| %>
      <%= f.search_field :title_cont, placeholder: t("admin.books.placeholders.search"), class: "form-control me-2" %>
      <%= f.submit t("admin.books.actions.search"), class: "btn btn-primary search-btn" %>
    <% end %>
  </div>
</div>

<div class="table-responsive">
  <table class="table table-hover table-bordered align-middle text-center">
    <thead class="table-light">
      <tr>
        <th class="text-center"><%= t("admin.books.attributes.id") %></th>
        <th class="text-center"><%= t("admin.books.attributes.title") %></th>
        <th class="text-center"><%= t("admin.books.attributes.total_quantity") %></th>
        <th class="text-center"><%= t("admin.books.attributes.available_quantity") %></th>
        <th class="text-center"><%= t("admin.books.attributes.action") %></th>
      </tr>
    </thead>

    <tbody>
      <% @books.each_with_index do |book, idx| %>
        <%= render "book", book: book, idx: idx, pagy: @pagy %>
      <% end %>
    </tbody>
  </table>
</div>

<div class="d-flex justify-content-center mt-3">
  <%== pagy_bootstrap_nav(@pagy) if @pagy.pages > 1 %>
</div>
